{
	"info": {
		"_postman_id": "61c45112-1c98-4fb5-b692-cbe872d309da",
		"name": "AIR_ROUTES",
		"description": "Postman collection to check all the HTTP CRUD methods used on my data (air_routes)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Initial Check - all clean",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Test an empty array\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.length).to.eql(0);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "First thing to do is to be sure that the API works correctly and it returns an empty array."
			},
			"response": []
		},
		{
			"name": "loadInitialData",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/loadInitialData",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"loadInitialData"
					]
				},
				"description": "Then, load all the data from my array (air_routes) saved on the initial steps."
			},
			"response": []
		},
		{
			"name": "Data Loaded",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Array > 0\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.length).to.greaterThan(0);\r",
							"});\r",
							"\r",
							"pm.test(\"Array length is 5\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.length).to.eql(5);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Checking: Previous operation worked correctly by using again GET, it returns a fully array."
			},
			"response": []
		},
		{
			"name": "search",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Array length is 1\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.length).to.eql(1);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes?district=Madrid&year=2020",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					],
					"query": [
						{
							"key": "district",
							"value": "Madrid"
						},
						{
							"key": "year",
							"value": "2020"
						}
					]
				},
				"description": "Search check"
			},
			"response": []
		},
		{
			"name": "Checking pagination",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes?limit=2&offset=0",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					],
					"query": [
						{
							"key": "limit",
							"value": "2"
						},
						{
							"key": "offset",
							"value": "0"
						}
					]
				},
				"description": "Checking correct pagination (warning: sorted elements are so cause the find() method used in code!"
			},
			"response": []
		},
		{
			"name": "ROOT POST OK",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"district\": \"AndalucíaX\",\r\n        \"year\": 2020,\r\n        \"flight\": 78777,\r\n        \"passenger\": 7441585,\r\n        \"merchandise\": 10561907\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Checking POST"
			},
			"response": []
		},
		{
			"name": "400 json params error",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"district\": \"AndalucíaQ\",\r\n        \"year\": 2020,\r\n        \"flight\": 78777,\r\n        \"passenger\": 7441585,\r\n        \"merchandise\": 10561907,\r\n        \"availability\" : \"yes\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Checking the 400 error cause there is an extra field in the resource petition"
			},
			"response": []
		},
		{
			"name": "409 Resource Exists",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 409\", function () {\r",
							"    pm.response.to.have.status(409);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"district\": \"AndalucíaX\",\r\n        \"year\": 2020,\r\n        \"flight\": 78777,\r\n        \"passenger\": 7441585,\r\n        \"merchandise\": 10561907\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Checking 409 Error due to an existing resource"
			},
			"response": []
		},
		{
			"name": "GET per resource",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Madrid/2019",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Madrid",
						"2019"
					]
				},
				"description": "GET a resource"
			},
			"response": []
		},
		{
			"name": "DEL district & year",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Madrid/2020",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Madrid",
						"2020"
					]
				},
				"description": "Deleting a resource by district and year"
			},
			"response": []
		},
		{
			"name": "Check deleted resource",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 404\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Madrid/2020",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Madrid",
						"2020"
					]
				},
				"description": "Checking it doesn't exist anymore"
			},
			"response": []
		},
		{
			"name": "DEL district",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Andalucía",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Andalucía"
					]
				},
				"description": "Deleting a whole district"
			},
			"response": []
		},
		{
			"name": "Check deleted district",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 404\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Andalucía",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Andalucía"
					]
				},
				"description": "Checking it"
			},
			"response": []
		},
		{
			"name": "405 ROOT PUT",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 405\", function () {\r",
							"    pm.response.to.have.status(405);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Putting the root collection"
			},
			"response": []
		},
		{
			"name": "CHECK DB",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "So many tests. Time to take a rest and check how is our DB"
			},
			"response": []
		},
		{
			"name": "PUT Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n        \"district\": \"Madrid\",\r\n        \"year\": \"2019\",\r\n        \"flight\": 4156958,\r\n        \"passenger\": 61703370,\r\n        \"merchandise\": 558566726\r\n    }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Madrid/2019",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Madrid",
						"2019"
					]
				},
				"description": "Checking It's all OK when trying to put a specific resource"
			},
			"response": []
		},
		{
			"name": "400 json params error",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {\r",
							"    pm.response.to.have.status(400);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n        \"district\": \"Madrid\",\r\n        \"year\": \"2019\",\r\n        \"flight\": 417958,\r\n        \"passenger\": 61703370,\r\n        \"merchandise\": 558566726,\r\n        \"availability\" : \"yes\"\r\n    }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Madrid/2019",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Madrid",
						"2019"
					]
				},
				"description": "400 error -some fields in the resource are not possible-"
			},
			"response": []
		},
		{
			"name": "409 Resource Exists",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 409\", function () {\r",
							"    pm.response.to.have.status(409);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n        \"district\": \"Valencia\",\r\n        \"year\": \"2020\",\r\n        \"flight\": 158405,\r\n        \"passenger\": 17071089,\r\n        \"merchandise\": 401133380\r\n    }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Madrid/2019",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Madrid",
						"2019"
					]
				},
				"description": "It doesnt exist."
			},
			"response": []
		},
		{
			"name": "405 CANNOT POST resource",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 405\", function () {\r",
							"    pm.response.to.have.status(405);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes/Andalucia/2020",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes",
						"Andalucia",
						"2020"
					]
				},
				"description": "Cannot post a specific resource-> ERROR"
			},
			"response": []
		},
		{
			"name": "DEL db",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Deleting whole DB"
			},
			"response": []
		},
		{
			"name": "ReCheck ALL CLEAN",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"pm.test(\"Test an empty array\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.length).to.eql(0);\r",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://sos2021-26.herokuapp.com/api/v1/air_routes",
					"protocol": "https",
					"host": [
						"sos2021-26",
						"herokuapp",
						"com"
					],
					"path": [
						"api",
						"v1",
						"air_routes"
					]
				},
				"description": "Checking it is all nice and clean"
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "HOST",
			"value": "localhost"
		},
		{
			"key": "PORT",
			"value": "1607"
		}
	]
}